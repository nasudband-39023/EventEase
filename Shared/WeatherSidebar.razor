@using EventEaseProject.Models
@using EventEaseProject.Services
@inject WeatherService WeatherService

<h4>Weather Now</h4>

@if (weatherList == null)
{
    <p><em>Loading...</em></p>
}
else
{
    @foreach (var weather in weatherList)
    {
        <div class="weather-mini">
            <p><strong>@weather.name</strong></p>
            <p>@weather.weather[0].description</p>
            <p>@weather.main.temp Â°C</p>
            <img src="@($"https://openweathermap.org/img/wn/{weather.weather[0].icon}@2x.png")" alt="icon" width="50" />
        </div>
    }
}

@code {
    private List<WeatherModel>? weatherList;

    private readonly List<string> cities = new() { "Seattle", "Central Park", "San Francisco" };

    protected override async Task OnInitializedAsync()
    {
        weatherList = await WeatherService.GetWeatherForCitiesAsync(cities);
    }
}